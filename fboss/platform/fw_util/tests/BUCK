load("@fbcode_macros//build_defs:cpp_unittest.bzl", "cpp_unittest")

oncall("fboss_platform")

cpp_unittest(
    name = "config_validator_test",
    srcs = [
        "ConfigValidatorTest.cpp",
    ],
    # Required for parameterized tests (TEST_P) - static listing doesn't support them
    # See: https://fburl.com/parameterized-test-not-supported
    supports_static_listing = False,
    deps = [
        "//fboss/platform/fw_util:core",
    ],
)

cpp_unittest(
    name = "fw_util_helpers_test",
    srcs = [
        "FwUtilHelpersTests.cpp",
    ],
    deps = [
        "//fboss/platform/fw_util:core",
        "//fboss/platform/helpers:platform_utils",
    ],
)

cpp_unittest(
    name = "fw_util_operations_test",
    srcs = [
        "FwUtilOperationsTest.cpp",
    ],
    deps = [
        "//fboss/platform/fw_util:core",
    ],
)

cpp_unittest(
    name = "fw_util_version_handler_test",
    srcs = [
        "FwUtilVersionHandlerTest.cpp",
    ],
    deps = [
        "fbsource//third-party/googletest:gmock",
        "//fboss/platform/fw_util:core",
    ],
)

cpp_unittest(
    name = "fw_util_verify_test",
    srcs = [
        "FwUtilVerifyTest.cpp",
    ],
    deps = [
        "fbsource//third-party/googletest:gmock",
        "//fboss/platform/fw_util:core",
    ],
)

cpp_unittest(
    name = "fw_util_upgrade_test",
    srcs = [
        "FwUtilUpgradeTest.cpp",
    ],
    deps = [
        "fbsource//third-party/googletest:gmock",
        "//fboss/platform/fw_util:core",
    ],
)

cpp_unittest(
    name = "fw_util_preupgrade_test",
    srcs = [
        "FwUtilPreUpgradeTest.cpp",
    ],
    deps = [
        "fbsource//third-party/googletest:gmock",
        "//fboss/platform/fw_util:core",
    ],
)

cpp_unittest(
    name = "fw_util_postupgrade_test",
    srcs = [
        "FwUtilPostUpgradeTest.cpp",
    ],
    deps = [
        "fbsource//third-party/googletest:gmock",
        "//fboss/platform/fw_util:core",
    ],
)

cpp_unittest(
    name = "fw_util_read_test",
    srcs = [
        "FwUtilReadTest.cpp",
    ],
    deps = [
        "fbsource//third-party/googletest:gmock",
        "//fboss/platform/fw_util:core",
    ],
)

cpp_unittest(
    name = "fw_util_flashrom_test",
    srcs = [
        "FwUtilFlashromTest.cpp",
    ],
    deps = [
        "//fboss/platform/fw_util:core",
    ],
)

cpp_unittest(
    name = "fw_util_impl_test",
    srcs = [
        "FwUtilImplTest.cpp",
    ],
    deps = [
        "//fboss/platform/fw_util:core",
    ],
)
